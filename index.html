<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Norberto Granero - Consultor y Auditor de Sistemas ISO</title>
    <meta name="description"
        content="Servicios de auditoría y consultoría en sistemas de gestión ISO 9001, ISO 14001 e ISO 45001. Experto en mejora continua y cumplimiento normativo.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <header class="header">
        <div class="container">
            <a href="#" class="logo">NG Consultoría</a>
            <nav class="nav">
                <a href="#about">Sobre Mí</a>
                <a href="#services">Servicios</a>
                <a href="#contact" class="btn-primary">Contactar</a>
            </nav>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="hero" class="hero">
            <div class="container hero-content">
                <div class="hero-text">
                    <span class="subtitle">Excelencia en Sistemas de Gestión</span>
                    <h1>Consultor y Auditor de Normas ISO</h1>
                    <p>Optimización de procesos y garantía de cumplimiento normativo con más de 20 años de experiencia
                        en ISO
                        9001, ISO 14001 e ISO 45001.</p>
                    <div class="hero-buttons">
                        <a href="#contact" class="btn-primary">Solicitar Asesoría</a>
                        <a href="#services" class="btn-secondary">Ver Servicios</a>
                    </div>
                </div>
                <div class="hero-image">
                    <div class="image-wrapper">
                        <img src="assets/auditor_corporativo.png" alt="Auditor Profesional">
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="about">
            <div class="container">
                <div class="section-header">
                    <h2>Trayectoria Profesional</h2>
                    <div class="divider"></div>
                </div>
                <div class="about-content">
                    <div class="about-card">
                        <i class="fa-solid fa-user-tie icon"></i>
                        <h3>Experiencia</h3>
                        <p>Más de 20 años de experiencia en consulting y auditoría, asesorando a más de 100
                            organizaciones
                            en la implementación de sistemas de gestión.</p>
                    </div>
                    <div class="about-card">
                        <i class="fa-solid fa-graduation-cap icon"></i>
                        <h3>Formación</h3>
                        <p>Diplomado en Graduado Social y Máster en Prevención de Riesgos Laborales, con un enfoque
                            integral
                            en la gestión empresarial.</p>
                    </div>
                    <div class="about-card">
                        <i class="fa-solid fa-chart-line icon"></i>
                        <h3>Enfoque</h3>
                        <p>Especialista en optimizar procesos y garantizar el cumplimiento normativo con un firme
                            compromiso
                            hacia la mejora continua.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="services">
            <div class="container">
                <div class="section-header">
                    <h2>Servicios Especializados</h2>
                    <p>Implementación y auditoría de sistemas de gestión bajo normativas internacionales.</p>
                    <div class="divider"></div>
                </div>
                <div class="services-grid">
                    <div class="service-card">
                        <div class="card-icon"><i class="fa-solid fa-medal"></i></div>
                        <h3>ISO 9001: Calidad</h3>
                        <p>Implementación de Sistemas de Gestión de la Calidad para mejorar la satisfacción del cliente
                            y la
                            eficiencia operativa.</p>
                    </div>
                    <div class="service-card">
                        <div class="card-icon"><i class="fa-solid fa-leaf"></i></div>
                        <h3>ISO 14001: Medio Ambiente</h3>
                        <p>Asesoramiento en Gestión Ambiental para minimizar el impacto ecológico y cumplir con la
                            legislación vigente.
                        </p>
                    </div>
                    <div class="service-card">
                        <div class="card-icon"><i class="fa-solid fa-helmet-safety"></i></div>
                        <h3>ISO 45001: SST</h3>
                        <p>Gestión de la Seguridad y Salud en el Trabajo, reduciendo riesgos laborales y creando
                            entornos seguros.</p>
                    </div>
                    <div class="service-card">
                        <div class="card-icon"><i class="fa-solid fa-magnifying-glass-chart"></i></div>
                        <h3>Auditoría Interna</h3>
                        <p>Evaluación exhaustiva de sistemas de gestión para detectar oportunidades de mejora y asegurar
                            la certificación.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dynamic Statistics / Trust Section -->
        <section class="trust">
            <div class="container">
                <div class="stat">
                    <span class="number">+100</span>
                    <span class="label">Organizaciones Asesoradas</span>
                </div>
                <div class="stat">
                    <span class="number">100%</span>
                    <span class="label">Compromiso Normativo</span>
                </div>
                <div class="stat">
                    <span class="number">+20</span>
                    <span class="label">Años de Experiencia</span>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact">
            <div class="container">
                <div class="contact-wrapper">
                    <div class="contact-info">
                        <h2>Contacte para una consulta</h2>
                        <p>Estoy disponible para discutir sus necesidades de auditoría y cómo puedo ayudar a su
                            organización a alcanzar la excelencia en gestión.</p>

                        <div class="info-item">
                            <i class="fa-solid fa-envelope"></i>
                            <div>
                                <h4>Email</h4>
                                <a href="mailto:contacto@auditor-iso.com">contacto@auditor-iso.com</a>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fa-solid fa-phone"></i>
                            <div>
                                <h4>Teléfono</h4>
                                <a href="tel:+34123456789">+34 123 456 789</a>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fa-brands fa-linkedin"></i>
                            <div>
                                <h4>LinkedIn</h4>
                                <a href="#" target="_blank">linkedin.com/in/auditor-iso</a>
                            </div>
                        </div>
                    </div>
                    <div class="contact-form-container">
                        <form class="contact-form" id="mainContactForm">
                            <div class="form-group">
                                <label for="name">Nombre</label>
                                <input type="text" id="name" name="nombre" placeholder="Su nombre" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" id="email" name="email" placeholder="Su correo electrónico"
                                    required>
                            </div>
                            <div class="form-group">
                                <label for="asunto">Asunto</label>
                                <input type="text" id="asunto" name="asunto" placeholder="Asunto de la consulta"
                                    required>
                            </div>
                            <div class="form-group">
                                <label for="message">Mensaje</label>
                                <textarea id="message" name="mensaje" rows="4" placeholder="¿En qué puedo ayudarle?"
                                    required></textarea>
                            </div>
                            <button type="submit" class="btn-primary full-width">Enviar Mensaje</button>
                        </form>
                    </div>

                    <script>
                        // Despertar al servidor de Render al cargar la página
                        window.addEventListener('DOMContentLoaded', () => {
                            fetch('https://asistente-auditoria-backend.onrender.com/')
                                .then(res => console.log('Servidor despertando...'))
                                .catch(err => console.error('Error despertando servidor:', err));
                        });

                        document.getElementById('mainContactForm').addEventListener('submit', async function (e) {
                            e.preventDefault();

                            const btn = this.querySelector('button');
                            const originalText = btn.innerText;
                            btn.innerText = 'Enviando...';
                            btn.disabled = true;

                            const formData = {
                                nombre: document.getElementById('name').value,
                                email: document.getElementById('email').value,
                                asunto: document.getElementById('asunto').value,
                                mensaje: document.getElementById('message').value
                            };

                            try {
                                const response = await fetch('https://asistente-auditoria-backend.onrender.com/webhook', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify(formData)
                                });

                                const result = await response.json();

                                if (response.ok) {
                                    const reporte = result.reporte;
                                    let mensajeFinal = `¡Gracias! (v1.2) Su mensaje ha sido procesado.\n\n`;

                                    // Ponemos el estatus del email arriba del todo
                                    if (reporte.email_intentado) {
                                        if (reporte.email_enviado) {
                                            mensajeFinal += `✅ EMAIL ENVIADO con éxito.\n\n`;
                                        } else {
                                            mensajeFinal += `⚠️ ERROR DE ENVÍO: ${reporte.email_error || 'Timeout'}\n\n`;
                                        }
                                    } else {
                                        mensajeFinal += `ℹ️ No se requiere respuesta automática.\n\n`;
                                    }

                                    mensajeFinal += `Detalles técnicos:\n`;
                                    mensajeFinal += `- Clasificación: ${reporte.clasificacion}\n`;
                                    mensajeFinal += `- Razón: ${reporte.razon}\n`;

                                    if (!reporte.email_enviado && reporte.email_intentado) {
                                        mensajeFinal += `\n(Nota: Su mensaje se ha guardado en el servidor aunque el email haya fallado).`;
                                    }

                                    alert(mensajeFinal);
                                    this.reset();
                                } else {
                                    alert('Hubo un error en el servidor: ' + (result.detalle || result.error || 'Error desconocido'));
                                }
                            } catch (error) {
                                console.error('Error:', error);
                                alert('No se pudo conectar con el servidor. Asegúrese de que server.py esté ejecutándose.');
                            } finally {
                                btn.innerText = originalText;
                                btn.disabled = false;
                            }
                        });
                    </script>
                </div>
            </div>
        </section>

    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Norberto Granero - Consultoría y Auditoría ISO. Todos los derechos reservados.</p>
            <div class="social-links">
                <a href="#"><i class="fa-brands fa-linkedin-in"></i></a>
                <a href="#"><i class="fa-brands fa-twitter"></i></a>
            </div>
        </div>
    </footer>

</body>

</html>